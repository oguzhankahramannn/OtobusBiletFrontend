<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Otobüs Bileti Satış</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
    }

    body {
      background: linear-gradient(135deg, #e0f7fa 0%, #b2ebf2 100%);
      min-height: 100vh;
    }

    .bckg {
      background: linear-gradient(rgba(255, 255, 255, 0.9), rgba(255, 255, 255, 0.9)),
                  url('https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?ixlib=rb-1.2.1&auto=format&fit=crop&w=1350&q=80');
      background-size: cover;
      background-position: center;
      min-height: 100vh;
      padding: 20px;
    }

    nav {
      background: rgba(255, 255, 255, 0.95);
      padding: 15px 30px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 30px;
    }

    .logo {
      font-size: 24px;
      color: #00838f;
      font-weight: bold;
    }

    .menu {
      display: flex;
      gap: 15px;
      align-items: center;
    }

    .menu a {
      color: #00838f;
      text-decoration: none;
      padding: 8px 15px;
      border-radius: 8px;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .menu a:hover {
      background: #e0f7fa;
      color: #006064;
    }

    .menu span {
      color: #00838f;
      font-weight: 600;
      margin-right: 15px;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    #guestMenu, #userMenu, #adminMenu {
      display: flex;
      gap: 10px;
      align-items: center;
    }

    .search-box {
      background: rgba(255, 255, 255, 0.95);
      padding: 30px;
      border-radius: 15px;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
      max-width: 800px;
      margin: 0 auto;
    }

    .search-form {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .radio-group {
      display: flex;
      justify-content: center;
      gap: 20px;
      margin-bottom: 20px;
    }

    .radio-option {
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .radio-option input[type="radio"] {
      accent-color: #00838f;
    }

    .search-group {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .search-group label {
      color: #006064;
      font-weight: 500;
    }

    .search-group select,
    .search-group input[type="date"] {
      padding: 12px;
      border: 2px solid #b2ebf2;
      border-radius: 8px;
      font-size: 1rem;
      transition: all 0.3s ease;
      background: white;
    }

    .search-group select:focus,
    .search-group input[type="date"]:focus {
      border-color: #00838f;
      outline: none;
      box-shadow: 0 0 0 3px rgba(0, 131, 143, 0.1);
    }

    .search-btn {
      background: #00838f;
      color: white;
      padding: 15px;
      border: none;
      border-radius: 8px;
      font-size: 1.1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
      margin-top: 10px;
    }

    .search-btn:hover {
      background: #006064;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0, 131, 143, 0.2);
    }

    @media (max-width: 768px) {
      .search-box {
        padding: 20px;
      }
      
      nav {
        flex-direction: column;
        gap: 15px;
        text-align: center;
      }

      .menu {
        flex-direction: column;
        width: 100%;
      }

      #guestMenu, #userMenu, #adminMenu {
        flex-direction: column;
        width: 100%;
      }

      .menu a {
        width: 100%;
        justify-content: center;
      }
    }
  </style>
</head>
<body>
  <div class="bckg">
    <nav>
      <div class="logo"><strong>Otobüs Biletim</strong></div>
      <div class="menu">
        <div id="guestMenu">
          <a href="login.html"><i class="fas fa-user"></i> Kullanıcı Girişi</a>
          <a href="admin-login.html"><i class="fas fa-user-shield"></i> Admin Girişi</a>
        </div>
        <div id="userMenu" style="display: none;">
          <span><i class="fas fa-user"></i> <span id="userName"></span></span>
          <a href="user-panel.html"><i class="fas fa-user-circle"></i> Panelim</a>
          <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a>
        </div>
        <div id="adminMenu" style="display: none;">
          <span><i class="fas fa-user-shield"></i> <span id="adminName"></span></span>
          <a href="admin-panel.html"><i class="fas fa-cog"></i> Admin Panel</a>
          <a href="#" onclick="logout()"><i class="fas fa-sign-out-alt"></i> Çıkış Yap</a>
        </div>
      </div>
    </nav>

    <div class="search-box">
      <form class="search-form" action="search.html" method="get">
        <div style="width: 100%; text-align: center;">
          <div class="radio-group">
            <div class="radio-option">
              <input type="radio" id="oneway" name="trip_type" value="oneway" checked onchange="toggleReturnDate()" />
              <label for="oneway">Tek Yön</label>
            </div>
            <div class="radio-option">
              <input type="radio" id="roundtrip" name="trip_type" value="roundtrip" onchange="toggleReturnDate()" />
              <label for="roundtrip">Gidiş-Dönüş</label>
            </div>
          </div>
        </div>

        <div class="search-group">
          <label for="from">Nereden</label>
          <select id="from" name="from" required>
            <option value="" disabled selected>Şehir Seçin</option>
            <option value="istanbul">İstanbul</option>
            <option value="ankara">Ankara</option>
            <option value="izmir">İzmir</option>
            <option value="antalya">Antalya</option>
            <option value="bursa">Bursa</option>
            <option value="adana">Adana</option>
            <option value="trabzon">Trabzon</option>
            <option value="samsun">Samsun</option>
            <option value="gaziantep">Gaziantep</option>
            <option value="konya">Konya</option>
          </select>
        </div>

        <div class="search-group">
          <label for="to">Nereye</label>
          <select id="to" name="to" required>
            <!-- Aynı şehir listesi -->
            <option value="" disabled selected>Şehir Seçin</option>
            <option value="istanbul">İstanbul</option>
            <option value="ankara">Ankara</option>
            <option value="izmir">İzmir</option>
            <option value="antalya">Antalya</option>
            <option value="bursa">Bursa</option>
            <option value="adana">Adana</option>
            <option value="trabzon">Trabzon</option>
            <option value="samsun">Samsun</option>
            <option value="gaziantep">Gaziantep</option>
            <option value="konya">Konya</option>
          </select>
        </div>

        <div class="search-group">
          <label for="departure_date">Gidiş Tarihi</label>
          <input type="date" id="departure_date" name="departure_date" required />
        </div>

        <div class="search-group" id="return_date_group" style="display: none;">
          <label for="return_date">Dönüş Tarihi</label>
          <input type="date" id="return_date" name="return_date" />
        </div>

        <button type="submit" class="search-btn">Sefer Ara</button>
      </form>
    </div>
  </div>

  <!-- Kalan içerik: header, blog, firmalar, footer kısmı aynen devam eder... -->

  <script>
    function toggleReturnDate() {
      const returnDateGroup = document.getElementById('return_date_group');
      const isRoundtrip = document.getElementById('roundtrip').checked;
      returnDateGroup.style.display = isRoundtrip ? 'flex' : 'none';
      document.getElementById('return_date').required = isRoundtrip;
    }

    // Bugünkü tarihi set et (min değeri olarak)
    document.addEventListener('DOMContentLoaded', () => {
      const today = new Date().toISOString().split('T')[0];
      document.getElementById('departure_date').setAttribute('min', today);
      document.getElementById('return_date').setAttribute('min', today);

      // Kullanıcı durumunu kontrol et
      const token = localStorage.getItem("token");
      const userType = localStorage.getItem("userType");
      const username = localStorage.getItem("username");

      const guestMenu = document.getElementById("guestMenu");
      const userMenu = document.getElementById("userMenu");
      const adminMenu = document.getElementById("adminMenu");

      if (token) {
        guestMenu.style.display = "none";
        
        if (userType === "admin") {
          adminMenu.style.display = "flex";
          document.getElementById("adminName").textContent = username || "Admin";
        } else {
          userMenu.style.display = "flex";
          document.getElementById("userName").textContent = username || "Kullanıcı";
        }
      } else {
        guestMenu.style.display = "flex";
        userMenu.style.display = "none";
        adminMenu.style.display = "none";
      }
    });

    function logout() {
      localStorage.removeItem("token");
      localStorage.removeItem("username");
      localStorage.removeItem("userType");
      window.location.href = "anasayfa.html";
    }
  </script>
</body>
</html>
